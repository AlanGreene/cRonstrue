language: node_js
node_js:
- node
before_deploy:
    - git checkout master
    - npm run prerelease
    - npm version minor --force -m "Build %s [skip ci]"
deploy:
  provider: npm
  email: brady.holt@gmail.com
  api_key:
    secure: "u0uH+vog8NOcYkVj5yRl0zzCbRUkiD2UZ1Ta3i9w2BlVaeiOzuIi5BQZqCvD1ahSQ1OJ99GDpaq01OQwahso2+wLT9Jx2WzOY+hSQSquNToXeBObG0meyPMNinLPJ8cW/vaqoXw0Jdmp/AzIhw12XQ91PwBoGu0hRXywLyMqHT6A3k0+iYh8Xd5iCJTu9iwE0EAfPGQLfHPcQyu+O+jcDDcN/H+ZjvqtlyCYevg6ddBH9gWKeeiXKBDMFGqH1yh7bjwUR71R+pQItTv6IM9y58YTGWz8AzUxrsgb01mvclTRhEuk3wr3Smds8Qk7jmAGboGhKKIwe4pPaEmGKpD3o26evazNxmZczjvrjFS/Wq7izyw24Ad4TpZtry7emSWITNK280TbDteQE96VqkLtmjrb4oUc0Sy4J6joBPavbxtxD7PIa2mowfqNGuCVGb4SzREzrM16NxvV82j3FPRmksdnKSq184GgGOQRD57a7l6xMLwwWYKaG88oX7ki6icSFwEWN0BQ+B8sQM0y4wDkrnz/4qXwyfCeVwjV62jfMfmlpj4JvN7b46U8ne72pncWum8uucP2MlXK457gbUJTKFwhlQSjMyngwCHoK5YnTRuq/1g76CKaRqoNu2CQXDCEdm64QBcmc++IxF1JfbkVCLvrtlzhEagsM6TIy63YJNg="
  on:
    repo: bradymholt/cRonstrue
  skip_cleanup: true
after_deploy:
    - git config --global user.email "travis@travis-ci.org"
    - git config --global user.name "Travis CI"
    - git remote add gh-origin https://${GH_TOKEN}@github.com/${GH_REPO}.git
    - git push gh-origin master --tags
    - VERSION=$(node -p "require('./package.json').version")
    - |
      curl -H "Authorization: token ${GH_TOKEN}" -d '{"tag_name":"v'$VERSION'"}' https://api.github.com/repos/${GH_REPO}/releases
env:
  global:
    - GH_REPO=bradymholt/cRonstrue
    - secure: "UkXHaD8vn3Jc7V5LckkdGjWKPf7ybOobcE+fO8NCpmUtxdU1//XjPogDfrh5xjO1NFW4Rx9ywoK7XURf+IfvkoZRLr5bFx9Rn/S4ca+BR3RHH4nuWx4MCZGp+y+jP55G4T+PRA3QfN1n0MPDJLdE2KRy+7H3MIH9bX6G/HXTZkkC53IXpuM+8NcE+/MRKqGovr0vIumz3p0sJIJFQdDnepVsVxPbiWn42zLgbUZjiZBDxzJ4d3z647i16917/VijI4vDbIRxPk4/6sS6DfEEhJMrUxMsof+T8IJTUzhyQMwe18Io3wy5HyBePHZiKArLpoGaXe2eJCSdgY9zevBBaXw3b/hTADYQfIqewdwBaxbIfZCAqkhi7VbWaHItg7JXgMZbIv9OFXmBqomzXod0a4TVPDdbDsjLq/LAwy5FAQmGsdMceacht/5gCjAeHxnrRHnNvgzhOMAMq45fAXEyZavd8u2SDEMPrYIHQ1otibs316J9ZbQXB2hR82LllptLFxSLyrFqodw8hvpvUf5w8peCzB6pciGpfof961De63Z0QDVGHfKuTNuc6GNy+41+of9Bro4lGMVFaaPo5PNyBn6HPnLUr0v/ZQSmB3qpRDOMw+slWXveCgTIkJ9k58W8i61IwoYqgS2iV03+WZYeEUpqHl98jjeesPEIxdkA4Uk="
